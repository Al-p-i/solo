---
layout: default
---

## <a name="wtf">#wtf </a> is this blog

Этот бложик **idiotism-driven**, а не **knowledge-driven**. То есть я задаю вопросы, на которые заранее не знаю ответы, и со временем отвечаю на них

**Мое:**
[[github]](https://github.com/Al-p-i/)



## #Heroku
[https://www.heroku.com/](https://www.heroku.com/)

Смотрел, как можно построить папйлайн работы со студентами и посмотрел на хероку. Задумка была - разрабатывать и хостить готовые проекты на хероку.

### Wtf is Heroku
Облако, в которое можно прозрачно деплоить приложение. Мониторинг и управление делается с помощью cli утилиты heroku, деплой с помощью git push. Приложение крутится в dyno - контейнере для запуска одной команды. Есть система конфигурации процессов - Procfile.

Чем-то можно пользоваться даже без привязки карточки - 550 бесплатных часов dyno. Если ввести карточку, то 1000 - то есть один сервис может крутиться бесплатно.

С точки зрения ресурсов на heroku особо не развернешься. Цитата:

"The amount of physical memory available to your application is 512MB on a free, hobby or standard-1x dyno and 1024MB on a standard-2x dyno"

То есть heroku заточен под много маленьких сервисов.

Можно только поработать с окружением в котором поднимается сервис (посмотреть на файловую систему, повыставлять переменные среды, поменять задеплоенные файлики). 
Делается это так:
```
heroku run bash
```
Посмотреть на процесс нельзя (по крайней мере в туториале этого нет и видимо это недоступно стандартными средствами) а жаль. Как например взять thread dump?

[https://devcenter.heroku.com/articles/java-memory-issues](https://devcenter.heroku.com/articles/java-memory-issues)

Прямого доступа к контейнеру с приложением, насколько я понял, у нас нет. То есть весь менеджмент ложится на тулчейн heroku.
По умолчанию ты можешь смотреть только поледние 1500 строк логов через
```
heroku logs --tail
```
Чтобы смотреть все логи, надо поставить add-on.
Как я понял, здесь все делается add-on-ами. С помощью них можно подключить местный cron, db, кэши и т.п.
Add-on-ов действительно много

[https://elements.heroku.com/addons/](https://elements.heroku.com/addons/)

### Выводы
Короче говоря, heroku можно юзать для разработки и хостинга несложных сервисов и для прототипирования. Сделал - запушил на хероку - посмотрел результат.

Для работы со студентами не подойдет. Хотя бесплатных (без привязки карточки) 550 часов в месяц за глаза достаточно, но пайплайн работы с приложением сильно специфичен для хероку - студенты будут учиться работать с heroku, а не работать с java стэком в боевом окружении



## #Shenandoah
[http://openjdk.java.net/jeps/189)](http://openjdk.java.net/jeps/189)

gc, разрабатываемый Red Hat в рамках openjdk, задача которого - маленькие паузы на больших хипах (>20 GiB). Он добивается этого за счет concurrent compaction. Единственный stw возникает при нахождении корней. То есть паузы больше не зависят линейно от размера кучи.



## #Azul Zing
[https://www.azul.com/products/zing/](https://www.azul.com/products/zing/)

Проприетарная реализация JVM с акцентом на перформанс. Основные фичи - pauseless gc (не верится, что совсем pauseless), быстрый старт (они везде это подчеркивают, но мне не понятна выгода от этого для почти всех проектов), low-overhead monitoring (интересно посмотреть на инструменты). Zing Нахуй никому не нужен, потому что hotspot со своим перформансом и настраиваемыми паузами подходит почти под все задачи. Но в перспективе они могли бы стать востребваны: паузы gc пропорциональны размеру кучи, а требование к памяти растет со временем быстро. А интересно, для g1 время сборки тоже растет линейно от размера кучи (да, у него не concurrent evacuation)? Кроме того, есть какой-то shenandoah, не решает ли он эту проблему (да, [#5](#5))?



## #Как там мифический курс?
Итоги курса. Их надо подвести и подготовить хороший текст для публикации в каком-нибудь ресурсе типа хабра или медиума



## #Где справлять Новый Год?
В Ижевске с Вовой!



## #Что будет с misc.Unsafe в java 9?
Пугали, что выпилят к чертям. Я подумал, что просто так, конечно не выпилят, а, например, заиспользуют модульность новой джавы и отпилят или скроют его по дефолту. Сегодня решил разобраться и залез в исходники. А там ... (продолжение завтра)
